<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O9 Action Button Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .code-editor {
            font-family: 'Fira Code', 'Consolas', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .syntax-javascript .keyword { color: #569cd6; }
        .syntax-javascript .string { color: #ce9178; }
        .syntax-javascript .comment { color: #6a9955; }
        .syntax-javascript .function { color: #dcdcaa; }
        
        .loading-dots::after {
            content: '';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        .notification {
            transition: all 0.3s ease-in-out;
        }
        
        .notification.slide-in {
            transform: translateX(0);
        }
        
        .notification.slide-out {
            transform: translateX(100%);
        }
        
        .tab-active {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app"></div>
    
    <!-- React and Required Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // API utility functions
        const API_BASE = '/api';

        const api = {
            // Knowledge Base
            uploadKnowledge: async (files, category, actionButtonType, description) => {
                const formData = new FormData();
                files.forEach(file => formData.append('files', file));
                if (category) formData.append('category', category);
                formData.append('actionButtonType', actionButtonType);
                formData.append('description', description);
                
                const response = await fetch(`${API_BASE}/knowledge/upload`, {
                    method: 'POST',
                    body: formData
                });
                return response.json();
            },
            
            getKnowledge: async (category, actionButtonType) => {
                const params = new URLSearchParams();
                if (category) params.append('category', category);
                if (actionButtonType) params.append('actionButtonType', actionButtonType);
                
                const response = await fetch(`${API_BASE}/knowledge?${params}`);
                return response.json();
            },
            
            searchKnowledge: async (searchQuery, category, actionButtonType) => {
                const response = await fetch(`${API_BASE}/knowledge/search`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ searchQuery, category, actionButtonType })
                });
                return response.json();
            },
            
            // Field Bindings
            createFieldBinding: async (data) => {
                const response = await fetch(`${API_BASE}/field-bindings`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                return response.json();
            },
            
            getFieldBindings: async (actionButtonType) => {
                const params = new URLSearchParams();
                if (actionButtonType) params.append('actionButtonType', actionButtonType);
                
                const response = await fetch(`${API_BASE}/field-bindings?${params}`);
                return response.json();
            },
            
            getFieldBindingTemplates: async () => {
                const response = await fetch(`${API_BASE}/field-bindings/templates/action-button-types`);
                return response.json();
            },
            
            validateFieldBinding: async (fields) => {
                const response = await fetch(`${API_BASE}/field-bindings/validate`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ fields })
                });
                return response.json();
            },
            
            // Code Generation
            generateCode: async (data) => {
                const response = await fetch(`${API_BASE}/generate-code`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                return response.json();
            },
            
            getGeneratedCode: async (id, projectId) => {
                const response = await fetch(`${API_BASE}/generate-code/${id}?projectId=${projectId}`);
                return response.json();
            },
            
            downloadCode: async (id, projectId) => {
                const response = await fetch(`${API_BASE}/generate-code/${id}/download?projectId=${projectId}`);
                return response.blob();
            },
            
            getGenerationHistory: async () => {
                const response = await fetch(`${API_BASE}/generate-code/history/all`);
                return response.json();
            }
        };

        // Notification component
        function Notification({ message, type = 'info', onClose, duration = 5000 }) {
            const [isVisible, setIsVisible] = useState(true);

            useEffect(() => {
                const timer = setTimeout(() => {
                    setIsVisible(false);
                    setTimeout(onClose, 300);
                }, duration);

                return () => clearTimeout(timer);
            }, [onClose, duration]);

            const bgColor = type === 'error' ? 'bg-red-500' : 
                           type === 'success' ? 'bg-green-500' : 
                           type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500';

            return (
                <div className={`fixed top-4 right-4 z-50 notification ${isVisible ? 'slide-in' : 'slide-out'}`}>
                    <div className={`${bgColor} text-white px-6 py-4 rounded-lg shadow-lg max-w-md`}>
                        <div className="flex items-center justify-between">
                            <span className="flex-1">{message}</span>
                            <button 
                                onClick={() => setIsVisible(false)}
                                className="ml-4 text-white hover:text-gray-200"
                            >
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Loading component
        function LoadingSpinner({ size = 'md', text = 'Loading' }) {
            const sizeClass = size === 'sm' ? 'w-4 h-4' : size === 'lg' ? 'w-8 h-8' : 'w-6 h-6';
            
            return (
                <div className="flex items-center justify-center space-x-2">
                    <div className={`${sizeClass} border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin`}></div>
                    <span className="text-gray-600 loading-dots">{text}</span>
                </div>
            );
        }

        // Code Editor Component
        function CodeEditor({ value, onChange, language = 'javascript', readOnly = false }) {
            const textareaRef = useRef(null);

            const handleKeyDown = (e) => {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const start = e.target.selectionStart;
                    const end = e.target.selectionEnd;
                    const newValue = value.substring(0, start) + '  ' + value.substring(end);
                    onChange(newValue);
                    
                    setTimeout(() => {
                        e.target.selectionStart = e.target.selectionEnd = start + 2;
                    }, 0);
                }
            };

            return (
                <div className="relative">
                    <div className="absolute top-2 right-2 text-xs text-gray-400 uppercase">
                        {language}
                    </div>
                    <textarea
                        ref={textareaRef}
                        value={value}
                        onChange={(e) => onChange(e.target.value)}
                        onKeyDown={handleKeyDown}
                        readOnly={readOnly}
                        className={`code-editor w-full h-96 p-4 rounded-lg border border-gray-300 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm syntax-${language}`}
                        spellCheck="false"
                    />
                </div>
            );
        }

        // Knowledge Base Upload Component
        function KnowledgeUpload({ onUploadSuccess }) {
            const [files, setFiles] = useState([]);
            const [actionButtonType, setActionButtonType] = useState('');
            const [description, setDescription] = useState('');
            const [isUploading, setIsUploading] = useState(false);

            const actionButtonTypes = [
                'Mass Edit/Add',
                'Mass Delete',
                'Checkbox Edit/Add',
                'Checkbox Delete'
            ];

            const handleFileChange = (e) => {
                setFiles(Array.from(e.target.files));
            };

            const handleUpload = async () => {
                if (files.length === 0 || !actionButtonType) {
                    return;
                }

                setIsUploading(true);
                try {
                    const result = await api.uploadKnowledge(files, null, actionButtonType, description);
                    onUploadSuccess(result);
                    
                    // Reset form
                    setFiles([]);
                    setActionButtonType('');
                    setDescription('');
                    document.querySelector('input[type="file"]').value = '';
                    
                } catch (error) {
                    console.error('Upload failed:', error);
                } finally {
                    setIsUploading(false);
                }
            };

            return (
                <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4 flex items-center">
                        <i className="fas fa-upload mr-2 text-blue-600"></i>
                        Upload Knowledge Base Files
                    </h3>
                    
                    <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Files (JS, Images, Docs)
                            </label>
                            <input
                                type="file"
                                multiple
                                onChange={handleFileChange}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                accept=".js,.png,.jpg,.jpeg,.md,.pdf"
                            />
                            {files.length > 0 && (
                                <div className="mt-2 text-sm text-gray-600">
                                    Selected: {files.map(f => f.name).join(', ')}
                                </div>
                            )}
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Action Button Type
                            </label>
                            <select
                                value={actionButtonType}
                                onChange={(e) => setActionButtonType(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            >
                                <option value="">Select Type</option>
                                {actionButtonTypes.map(type => (
                                    <option key={type} value={type}>{type}</option>
                                ))}
                            </select>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Description (Optional)
                            </label>
                            <textarea
                                value={description}
                                onChange={(e) => setDescription(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                rows="3"
                                placeholder="Describe the purpose and functionality..."
                            />
                        </div>

                        <button
                            onClick={handleUpload}
                            disabled={!files.length || !actionButtonType || isUploading}
                            className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center"
                        >
                            {isUploading ? (
                                <LoadingSpinner size="sm" text="Uploading" />
                            ) : (
                                <>
                                    <i className="fas fa-cloud-upload-alt mr-2"></i>
                                    Upload Files
                                </>
                            )}
                        </button>
                    </div>
                </div>
            );
        }

        // Field Binding Designer Component
        function FieldBindingDesigner({ onSave }) {
            const [name, setName] = useState('');
            const [actionButtonType, setActionButtonType] = useState('');
            const [description, setDescription] = useState('');
            const [fields, setFields] = useState([]);
            const [templates, setTemplates] = useState({});

            useEffect(() => {
                loadTemplates();
            }, []);

            const loadTemplates = async () => {
                try {
                    const data = await api.getFieldBindingTemplates();
                    setTemplates(data);
                } catch (error) {
                    console.error('Failed to load templates:', error);
                }
            };

            const addField = () => {
                setFields([...fields, {
                    name: '',
                    dataType: 'string',
                    classification: 'dimension',
                    required: false,
                    description: ''
                }]);
            };

            const updateField = (index, property, value) => {
                const updatedFields = [...fields];
                updatedFields[index][property] = value;
                setFields(updatedFields);
            };

            const removeField = (index) => {
                setFields(fields.filter((_, i) => i !== index));
            };

            const loadTemplate = (templateType) => {
                if (templates[templateType]?.commonFields) {
                    setFields([...templates[templateType].commonFields]);
                    setActionButtonType(templateType);
                }
            };

            const handleSave = async () => {
                if (!name || !actionButtonType || fields.length === 0) {
                    return;
                }

                try {
                    const result = await api.createFieldBinding({
                        name,
                        actionButtonType,
                        description,
                        fields
                    });
                    onSave(result);
                    
                    // Reset form
                    setName('');
                    setActionButtonType('');
                    setDescription('');
                    setFields([]);
                    
                } catch (error) {
                    console.error('Save failed:', error);
                }
            };

            return (
                <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4 flex items-center">
                        <i className="fas fa-cogs mr-2 text-green-600"></i>
                        Field Binding Designer
                    </h3>

                    <div className="space-y-4">
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Configuration Name
                                </label>
                                <input
                                    type="text"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                    placeholder="e.g., Safety Stock Override Config"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Action Button Type
                                </label>
                                <select
                                    value={actionButtonType}
                                    onChange={(e) => setActionButtonType(e.target.value)}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                >
                                    <option value="">Select Type</option>
                                    {Object.keys(templates).map(type => (
                                        <option key={type} value={type}>{type}</option>
                                    ))}
                                </select>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Description
                            </label>
                            <textarea
                                value={description}
                                onChange={(e) => setDescription(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                                rows="2"
                                placeholder="Describe the field binding configuration..."
                            />
                        </div>

                        {actionButtonType && templates[actionButtonType] && (
                            <div className="bg-blue-50 p-4 rounded-lg">
                                <div className="flex items-center justify-between">
                                    <span className="text-sm text-blue-700">
                                        Load template for {actionButtonType}?
                                    </span>
                                    <button
                                        onClick={() => loadTemplate(actionButtonType)}
                                        className="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700"
                                    >
                                        Load Template
                                    </button>
                                </div>
                            </div>
                        )}

                        <div>
                            <div className="flex items-center justify-between mb-4">
                                <h4 className="font-medium text-gray-700">Field Definitions</h4>
                                <button
                                    onClick={addField}
                                    className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 flex items-center"
                                >
                                    <i className="fas fa-plus mr-2"></i>
                                    Add Field
                                </button>
                            </div>

                            <div className="space-y-3 max-h-96 overflow-y-auto">
                                {fields.map((field, index) => (
                                    <div key={index} className="border border-gray-200 rounded-lg p-4 bg-gray-50">
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                            <input
                                                type="text"
                                                value={field.name}
                                                onChange={(e) => updateField(index, 'name', e.target.value)}
                                                className="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                                placeholder="Field Name"
                                            />

                                            <select
                                                value={field.dataType}
                                                onChange={(e) => updateField(index, 'dataType', e.target.value)}
                                                className="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value="string">String</option>
                                                <option value="number">Number</option>
                                                <option value="boolean">Boolean</option>
                                                <option value="date">Date</option>
                                                <option value="array">Array</option>
                                            </select>

                                            <select
                                                value={field.classification}
                                                onChange={(e) => updateField(index, 'classification', e.target.value)}
                                                className="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                            >
                                                <option value="dimension">Dimension</option>
                                                <option value="measure">Measure</option>
                                                <option value="parameter">Parameter</option>
                                            </select>

                                            <div className="flex items-center space-x-2">
                                                <label className="flex items-center">
                                                    <input
                                                        type="checkbox"
                                                        checked={field.required}
                                                        onChange={(e) => updateField(index, 'required', e.target.checked)}
                                                        className="mr-1"
                                                    />
                                                    Required
                                                </label>
                                                <button
                                                    onClick={() => removeField(index)}
                                                    className="text-red-600 hover:text-red-800"
                                                >
                                                    <i className="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <input
                                            type="text"
                                            value={field.description}
                                            onChange={(e) => updateField(index, 'description', e.target.value)}
                                            className="mt-2 w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                            placeholder="Field description (optional)"
                                        />
                                    </div>
                                ))}
                            </div>
                        </div>

                        <button
                            onClick={handleSave}
                            disabled={!name || !actionButtonType || fields.length === 0}
                            className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center"
                        >
                            <i className="fas fa-save mr-2"></i>
                            Save Field Binding Configuration
                        </button>
                    </div>
                </div>
            );
        }

        // Code Generation Component
        function CodeGenerator({ onCodeGenerated }) {
            const [projectName, setProjectName] = useState('');
            const [actionButtonType, setActionButtonType] = useState('');
            const [businessLogic, setBusinessLogic] = useState('');
            const [fieldBindings, setFieldBindings] = useState([]);
            const [selectedFieldBinding, setSelectedFieldBinding] = useState('');
            const [additionalRequirements, setAdditionalRequirements] = useState('');
            const [isGenerating, setIsGenerating] = useState(false);
            const [generatedCode, setGeneratedCode] = useState('');

            useEffect(() => {
                loadFieldBindings();
            }, [actionButtonType]);

            const loadFieldBindings = async () => {
                try {
                    const data = await api.getFieldBindings(actionButtonType);
                    setFieldBindings(data);
                } catch (error) {
                    console.error('Failed to load field bindings:', error);
                }
            };

            const handleGenerate = async () => {
                if (!projectName || !actionButtonType || !businessLogic || !selectedFieldBinding) {
                    return;
                }

                setIsGenerating(true);
                try {
                    const result = await api.generateCode({
                        projectName,
                        actionButtonType,
                        businessLogic,
                        fieldBindingId: selectedFieldBinding,
                        additionalRequirements
                    });
                    
                    setGeneratedCode(result.generatedCode);
                    onCodeGenerated(result);
                    
                } catch (error) {
                    console.error('Code generation failed:', error);
                } finally {
                    setIsGenerating(false);
                }
            };

            const downloadCode = () => {
                const blob = new Blob([generatedCode], { type: 'application/javascript' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${projectName.replace(/[^a-zA-Z0-9]/g, '')}.js`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const clearGeneratedCode = () => {
                setGeneratedCode('');
            };

            return (
                <div className="bg-white rounded-lg shadow-md p-6">
                    <h3 className="text-lg font-semibold mb-4 flex items-center">
                        <i className="fas fa-robot mr-2 text-purple-600"></i>
                        AI Code Generator
                    </h3>

                    <div className="space-y-4">
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Project Name
                                </label>
                                <input
                                    type="text"
                                    value={projectName}
                                    onChange={(e) => setProjectName(e.target.value)}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="e.g., SOCPurgeAdd"
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Action Button Type
                                </label>
                                <select
                                    value={actionButtonType}
                                    onChange={(e) => setActionButtonType(e.target.value)}
                                    className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                >
                                    <option value="">Select Type</option>
                                    <option value="Mass Edit/Add">Mass Edit/Add</option>
                                    <option value="Mass Delete">Mass Delete</option>
                                    <option value="Checkbox Edit/Add">Checkbox Edit/Add</option>
                                    <option value="Checkbox Delete">Checkbox Delete</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Field Binding Configuration
                            </label>
                            <select
                                value={selectedFieldBinding}
                                onChange={(e) => setSelectedFieldBinding(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                            >
                                <option value="">Select Field Binding</option>
                                {fieldBindings.map(fb => (
                                    <option key={fb.id} value={fb.id}>{fb.name}</option>
                                ))}
                            </select>
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Business Logic Description
                            </label>
                            <textarea
                                value={businessLogic}
                                onChange={(e) => setBusinessLogic(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                rows="4"
                                placeholder="Describe what the Action Button should do..."
                            />
                        </div>

                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">
                                Additional Requirements (Optional)
                            </label>
                            <textarea
                                value={additionalRequirements}
                                onChange={(e) => setAdditionalRequirements(e.target.value)}
                                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                rows="2"
                                placeholder="Any special requirements or constraints..."
                            />
                        </div>

                        <button
                            onClick={handleGenerate}
                            disabled={!projectName || !actionButtonType || !businessLogic || !selectedFieldBinding || isGenerating}
                            className="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center"
                        >
                            {isGenerating ? (
                                <LoadingSpinner size="sm" text="Generating Code" />
                            ) : (
                                <>
                                    <i className="fas fa-magic mr-2"></i>
                                    Generate JavaScript Code
                                </>
                            )}
                        </button>

                        {generatedCode && (
                            <div className="mt-6">
                                <div className="flex items-center justify-between mb-4">
                                    <h4 className="font-medium text-gray-700">Generated Code</h4>
                                    <div className="flex items-center space-x-2">
                                        <button
                                            onClick={clearGeneratedCode}
                                            className="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center"
                                        >
                                            <i className="fas fa-times mr-2"></i>
                                            Clear
                                        </button>
                                        <button
                                            onClick={downloadCode}
                                            className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center"
                                        >
                                            <i className="fas fa-download mr-2"></i>
                                            Download
                                        </button>
                                    </div>
                                </div>
                                <CodeEditor
                                    value={generatedCode}
                                    onChange={setGeneratedCode}
                                    language="javascript"
                                />
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Main Application Component
        function App() {
            const [activeTab, setActiveTab] = useState('knowledge');
            const [notifications, setNotifications] = useState([]);

            const addNotification = (message, type = 'info') => {
                const id = Date.now();
                setNotifications(prev => [...prev, { id, message, type }]);
            };

            const removeNotification = (id) => {
                setNotifications(prev => prev.filter(n => n.id !== id));
            };

            const handleUploadSuccess = (result) => {
                addNotification(`Successfully uploaded ${result.files.length} files`, 'success');
            };

            const handleFieldBindingSave = (result) => {
                addNotification('Field binding configuration saved successfully', 'success');
            };

            const handleCodeGenerated = (result) => {
                addNotification('JavaScript code generated successfully', 'success');
            };

            const tabs = [
                { id: 'knowledge', name: 'Knowledge Base', icon: 'fa-database' },
                { id: 'fieldbindings', name: 'Field Bindings', icon: 'fa-cogs' },
                { id: 'generate', name: 'Generate Code', icon: 'fa-robot' }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
                    {/* Header */}
                    <header className="gradient-bg text-white py-6">
                        <div className="container mx-auto px-6">
                            <div className="flex items-center">
                                <i className="fas fa-code text-3xl mr-4"></i>
                                <div>
                                    <h1 className="text-2xl font-bold">O9 Action Button Generator</h1>
                                    <p className="text-blue-100">AI-powered JavaScript code generation for o9 supply chain platform</p>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Navigation */}
                    <nav className="bg-white shadow-sm">
                        <div className="container mx-auto px-6">
                            <div className="flex space-x-8">
                                {tabs.map(tab => (
                                    <button
                                        key={tab.id}
                                        onClick={() => setActiveTab(tab.id)}
                                        className={`py-4 px-6 border-b-2 font-medium text-sm transition-colors duration-200 ${
                                            activeTab === tab.id
                                                ? 'border-blue-500 text-white tab-active'
                                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                        }`}
                                    >
                                        <i className={`fas ${tab.icon} mr-2`}></i>
                                        {tab.name}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    {/* Main Content */}
                    <main className="container mx-auto px-6 py-8">
                        {activeTab === 'knowledge' && (
                            <div className="max-w-4xl mx-auto">
                                <KnowledgeUpload onUploadSuccess={handleUploadSuccess} />
                            </div>
                        )}

                        {activeTab === 'fieldbindings' && (
                            <div className="max-w-6xl mx-auto">
                                <FieldBindingDesigner onSave={handleFieldBindingSave} />
                            </div>
                        )}

                        {activeTab === 'generate' && (
                            <div className="max-w-6xl mx-auto">
                                <CodeGenerator onCodeGenerated={handleCodeGenerated} />
                            </div>
                        )}
                    </main>

                    {/* Notifications */}
                    {notifications.map(notification => (
                        <Notification
                            key={notification.id}
                            message={notification.message}
                            type={notification.type}
                            onClose={() => removeNotification(notification.id)}
                        />
                    ))}
                </div>
            );
        }

        // Render the application
        ReactDOM.render(<App />, document.getElementById('app'));
    </script>
</body>
</html>